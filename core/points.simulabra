$(std)

$(def ~class(new {
  name 'point
  slots {
    x ~var(new { default 0 })
    y ~var(new { default 0 })
    dist ~method(new {
      do $(fn [other]
        .(x | sub %other(x) | pow 2 | add .(y | sub %other(y) | pow 2) | sqrt)
      )
    })
  }
}))

$(defn test []
  $(let p ~point(new))
  $(let q ~point(new))
  %p(x 3)
  %q(y 4)
  %p(dist %q)
)
